exports.id=317,exports.ids=[317],exports.modules={1825:()=>{},1876:(e,t,s)=>{Promise.resolve().then(s.bind(s,5988)),Promise.resolve().then(s.bind(s,8633)),Promise.resolve().then(s.bind(s,732))},4431:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,2994,23)),Promise.resolve().then(s.t.bind(s,6114,23)),Promise.resolve().then(s.t.bind(s,9727,23)),Promise.resolve().then(s.t.bind(s,9671,23)),Promise.resolve().then(s.t.bind(s,1868,23)),Promise.resolve().then(s.t.bind(s,4759,23))},5988:(e,t,s)=>{"use strict";s.d(t,{default:()=>l});var r=s(326),a=s(4951),o=s(4976);s(7577);let n=new a.S;function l({children:e}){return r.jsx(o.aH,{client:n,children:e})}},8633:(e,t,s)=>{"use strict";s.d(t,{default:()=>i});var r=s(326);s(7577);var a=s(434),o=s(5047),n=s(732);let l=[{label:"Dashboard",href:"/dashboard",icon:"\uD83D\uDCCA",roles:[]},{label:"Employees",href:"/employees",icon:"\uD83D\uDC65",roles:["super_admin","HR"]},{label:"Attendance",href:"/attendance",icon:"â°",roles:["super_admin","HR"]},{label:"Announcements",href:"/announcements",icon:"\uD83D\uDCE2",roles:["super_admin","HR"]},{label:"Documents",href:"/documents",icon:"\uD83D\uDCC1",roles:["super_admin","HR"]},{label:"Activity Logs",href:"/activity-logs",icon:"\uD83D\uDCDD",roles:["super_admin","HR"]},{label:"Company Revenue",href:"/company-revenue",icon:"\uD83D\uDCB0",roles:["super_admin","accountant"]},{label:"Cash Flow",href:"/cash-flow",icon:"\uD83D\uDCB5",roles:["super_admin","accountant"]},{label:"Financial Statements",href:"/financial-statements",icon:"\uD83D\uDCC8",roles:["super_admin","accountant"]},{label:"Purchase Requests",href:"/purchase-requests",icon:"\uD83D\uDED2",roles:["super_admin","accountant"]},{label:"Suppliers",href:"/suppliers",icon:"\uD83C\uDFE2",roles:["super_admin","accountant"]},{label:"Annual Expenses",href:"/annual-expenses",icon:"\uD83D\uDCB8",roles:["super_admin","accountant"]},{label:"Payroll Reports",href:"/payroll-reports",icon:"\uD83D\uDCBC",roles:["super_admin","accountant"]}];function i(){let{user:e,logout:t}=(0,n.a)(),s=(0,o.usePathname)(),i=e?.role?.toLowerCase()||"";return(0,r.jsxs)("aside",{className:"w-72 bg-gradient-to-b from-slate-900 via-slate-800 to-slate-900 h-screen flex flex-col shadow-2xl border-r border-slate-700/50",children:[r.jsx("div",{className:"p-6 border-b border-slate-700/50",children:(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-xl flex items-center justify-center shadow-lg",children:r.jsx("span",{className:"text-white text-xl font-bold",children:"\uD83C\uDFE2"})}),(0,r.jsxs)("div",{children:[r.jsx("h1",{className:"text-xl font-bold bg-gradient-to-r from-white to-blue-200 bg-clip-text text-transparent",children:"Company Portal"}),r.jsx("p",{className:"text-xs text-slate-400",children:"Management System"})]})]})}),r.jsx("div",{className:"px-4 py-4 border-b border-slate-700/50",children:(0,r.jsxs)("div",{className:"flex items-center space-x-3 px-3 py-2 rounded-lg bg-slate-800/50",children:[r.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center text-white font-bold shadow-lg",children:e?.email?.[0]?.toUpperCase()||"U"}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"text-sm font-semibold text-white truncate",children:e?.email}),r.jsx("p",{className:"text-xs text-blue-400 font-medium capitalize",children:e?.role?.replace("_"," ")})]})]})}),r.jsx("nav",{className:"flex-1 overflow-y-auto p-4 space-y-1 scrollbar-thin scrollbar-thumb-slate-700 scrollbar-track-transparent",children:l.filter(e=>!e.roles.length||e.roles.includes(i)).map(e=>{let t=s===e.href||s?.startsWith(e.href+"/");return(0,r.jsxs)(a.default,{href:e.href,className:`
                  group flex items-center space-x-3 px-4 py-3 rounded-xl
                  transition-all duration-300 transform
                  ${t?"bg-gradient-to-r from-blue-600 to-indigo-600 text-white shadow-lg shadow-blue-500/50 scale-[1.02]":"text-slate-300 hover:bg-slate-800/50 hover:text-white hover:translate-x-1"}
                `,children:[r.jsx("span",{className:"text-xl group-hover:scale-110 transition-transform duration-300",children:e.icon}),r.jsx("span",{className:"font-medium text-sm",children:e.label}),t&&r.jsx("div",{className:"ml-auto w-2 h-2 bg-white rounded-full animate-pulse"})]},e.href)})}),r.jsx("div",{className:"p-4 border-t border-slate-700/50",children:(0,r.jsxs)("button",{onClick:t,className:"w-full flex items-center justify-center space-x-2 px-4 py-3  bg-gradient-to-r from-red-600 to-pink-600 hover:from-red-700 hover:to-pink-700 text-white rounded-xl font-semibold shadow-lg shadow-red-500/50 hover:shadow-red-600/50 transition-all duration-300 transform hover:scale-[1.02] active:scale-[0.98]",children:[r.jsx("span",{children:"\uD83D\uDEAA"}),r.jsx("span",{children:"Logout"})]})})]})}},732:(e,t,s)=>{"use strict";s.d(t,{AuthProvider:()=>i,a:()=>u});var r=s(326),a=s(7577),o=s(6824),n=s(5047);let l=(0,a.createContext)(void 0),i=({children:e})=>{let[t,s]=(0,a.useState)(null),[i,u]=(0,a.useState)(null),[c,d]=(0,a.useState)(!1),[h,p]=(0,a.useState)(null),m=(0,n.useRouter)();(0,a.useEffect)(()=>{let e=localStorage.getItem("token"),t=localStorage.getItem("user");e&&s(e),t&&u(JSON.parse(t))},[]);let f=async(e,t)=>{d(!0),p(null);let r=e.trim();try{let e=await o.Z.post("/auth/login",{email:r,password:t});if(e.data.requiresOtp)return{requiresOtp:!0};if(e.data.access_token&&e.data.user)return s(e.data.access_token),u(e.data.user),localStorage.setItem("token",e.data.access_token),localStorage.setItem("user",JSON.stringify(e.data.user)),{access_token:e.data.access_token,user:e.data.user};return p("Invalid response from server."),{}}catch(e){if(console.log("[Auth] Login error status:",e.response?.status),console.log("[Auth] Login error data:",e.response?.data),e.response?.data?.locked===!0&&e.response?.data?.email)return console.log("[Auth] OTP required (account locked)"),{requiresOtp:!0,email:e.response.data.email};if(e.response?.data?.suspended===!0)return p(e.response?.data?.message||"Your account has been suspended. Please contact an administrator."),{};return p(e.response?.data?.message||"Login failed"),{}}finally{d(!1)}},x=async e=>{d(!0),p(null),console.log("[Auth] Requesting OTP for forgot password:",e);try{let t=await o.Z.post("/auth/forgot-password",{email:e});return console.log("[Auth] Forgot password response:",t.data),!0}catch(e){return p(e.response?.data?.message||"Failed to request password reset OTP"),console.error("[Auth] Forgot password error:",e),!1}finally{d(!1)}},g=async(e,t)=>{d(!0),p(null),console.log("[Auth] Attempting OTP verification for email:",e);try{let r=await o.Z.post("/auth/verify-otp",{email:e,otp:t});if(console.log("[Auth] Response from /auth/verify-otp:",r.data),r.data.otp_reset)return console.log("[Auth] OTP verified, got otp_reset:",r.data.otp_reset),{otp_reset:r.data.otp_reset,type:"reset"};if(r.data.access_token&&r.data.user)return s(r.data.access_token),u(r.data.user),localStorage.setItem("token",r.data.access_token),localStorage.setItem("user",JSON.stringify(r.data.user)),{access_token:r.data.access_token,user:r.data.user,type:"mfa"};return p("Invalid OTP or response."),!1}catch(e){return p(e.response?.data?.message||"OTP verification failed"),!1}finally{d(!1)}},b=async(e,t,s,r)=>{d(!0),p(null);try{let a=await o.Z.post("/auth/reset-password",{email:e,otp_reset:t,newPassword:s,confirmPassword:r});return console.log("[Auth] Password reset response:",a.data),!0}catch(e){return p(e.response?.data?.message||"Password reset failed"),console.error("[Auth] Password reset error:",e),!1}finally{d(!1)}};return r.jsx(l.Provider,{value:{token:t,user:i,loading:c,error:h,login:f,forgotPassword:x,verifyOtp:g,logout:()=>{console.log("[Auth] Logging out user"),s(null),u(null),localStorage.removeItem("token"),localStorage.removeItem("user"),m.push("/login")},resetPassword:b},children:e})},u=()=>{let e=(0,a.useContext)(l);if(!e)throw Error("useAuth must be used within AuthProvider");return e}},6824:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let r=s(4464).Z.create({baseURL:"http://47.128.68.111:3000",withCredentials:!0,headers:{"Content-Type":"application/json"}});r.interceptors.request.use(e=>e),r.interceptors.response.use(e=>e,e=>Promise.reject(e));let a=r},3192:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var r=s(9510);s(7272);var a=s(8570);let o=(0,a.createProxy)(String.raw`/home/ubuntu/fyp/frontend/components/ClientProviders.tsx#default`),n=(0,a.createProxy)(String.raw`/home/ubuntu/fyp/frontend/components/Sidebar.tsx#default`),l=(0,a.createProxy)(String.raw`/home/ubuntu/fyp/frontend/context/AuthContext.tsx#AuthProvider`);function i({children:e}){return r.jsx("html",{lang:"en",children:r.jsx("body",{children:r.jsx(l,{children:r.jsx(o,{children:(0,r.jsxs)("div",{style:{display:"flex",minHeight:"100vh"},children:[r.jsx(n,{}),r.jsx("main",{style:{flex:1},children:e})]})})})})})}(0,a.createProxy)(String.raw`/home/ubuntu/fyp/frontend/context/AuthContext.tsx#useAuth`)},7272:()=>{}};