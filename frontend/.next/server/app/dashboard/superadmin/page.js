(()=>{var e={};e.id=614,e.ids=[614],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},7790:e=>{"use strict";e.exports=require("assert")},4770:e=>{"use strict";e.exports=require("crypto")},7702:e=>{"use strict";e.exports=require("events")},2048:e=>{"use strict";e.exports=require("fs")},2615:e=>{"use strict";e.exports=require("http")},2694:e=>{"use strict";e.exports=require("http2")},5240:e=>{"use strict";e.exports=require("https")},5315:e=>{"use strict";e.exports=require("path")},6162:e=>{"use strict";e.exports=require("stream")},7360:e=>{"use strict";e.exports=require("url")},1764:e=>{"use strict";e.exports=require("util")},1568:e=>{"use strict";e.exports=require("zlib")},4554:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>l.a,__next_app__:()=>u,originalPathname:()=>x,pages:()=>c,routeModule:()=>h,tree:()=>d}),s(6171),s(3192),s(5866);var r=s(3191),a=s(8716),n=s(7922),l=s.n(n),o=s(5231),i={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>o[e]);s.d(t,i);let d=["",{children:["dashboard",{children:["superadmin",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,6171)),"/home/ubuntu/fyp/frontend/app/dashboard/superadmin/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,3192)),"/home/ubuntu/fyp/frontend/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}],c=["/home/ubuntu/fyp/frontend/app/dashboard/superadmin/page.tsx"],x="/dashboard/superadmin/page",u={require:s,loadChunk:()=>Promise.resolve()},h=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/dashboard/superadmin/page",pathname:"/dashboard/superadmin",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},8636:(e,t,s)=>{Promise.resolve().then(s.bind(s,4402))},4402:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>m,dynamic:()=>h});var r=s(326),a=s(7577),n=s(5047),l=s(732),o=s(6824),i=s(4231),d=s(3679),c=s(2186);let x=({title:e,value:t,icon:s,trend:a,className:n="",variant:l="blue"})=>{let o={blue:"from-blue-500 to-indigo-600",green:"from-green-500 to-emerald-600",purple:"from-purple-500 to-pink-600",orange:"from-orange-500 to-red-600",red:"from-red-500 to-rose-600"};return(0,r.jsxs)("div",{className:`relative overflow-hidden bg-white rounded-2xl shadow-xl p-6 hover:shadow-2xl transition-all duration-300 transform hover:scale-[1.02] ${n}`,children:[r.jsx("div",{className:`absolute top-0 right-0 w-32 h-32 bg-gradient-to-br ${o[l]} opacity-10 rounded-bl-full`}),(0,r.jsxs)("div",{className:"relative z-10",children:[(0,r.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,r.jsxs)("div",{className:"flex-1",children:[r.jsx("p",{className:"text-sm font-medium text-gray-600 uppercase tracking-wide mb-1",children:e}),r.jsx("h3",{className:"text-3xl font-bold text-gray-900",children:t})]}),s&&r.jsx("div",{className:`w-12 h-12 bg-gradient-to-br ${o[l]} rounded-xl flex items-center justify-center shadow-lg`,children:s})]}),a&&(0,r.jsxs)("div",{className:"flex items-center space-x-1",children:[a.isPositive?r.jsx("svg",{className:"w-4 h-4 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})}):r.jsx("svg",{className:"w-4 h-4 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 17h8m0 0v-8m0 8l-8-8-4 4-6-6"})}),r.jsx("span",{className:`text-sm font-semibold ${a.isPositive?"text-green-600":"text-red-600"}`,children:a.value}),r.jsx("span",{className:"text-xs text-gray-500",children:"vs last month"})]})]})]})},u=({children:e,className:t="",variant:s="default",hover:a=!1})=>r.jsx("div",{className:`rounded-xl p-6 ${{default:"bg-white dark:bg-gray-900 shadow-lg",gradient:"bg-gradient-to-br from-white to-blue-50 dark:from-gray-900 dark:to-blue-950 shadow-xl",glass:"bg-white/80 dark:bg-gray-900/80 backdrop-blur-xl shadow-2xl border border-white/20",outline:"bg-transparent border-2 border-gray-200 dark:border-gray-700 shadow-none"}[s]} ${a?"hover:shadow-2xl hover:scale-[1.02] transition-all duration-300 transform":""} ${t}`,children:e}),h="force-dynamic";function m(){let{user:e,logout:t}=(0,l.a)(),s=(0,n.useRouter)(),[h,m]=(0,a.useState)(null),[p,g]=(0,a.useState)([]),[b,f]=(0,a.useState)(!0),[j,v]=(0,a.useState)(null),[w,y]=(0,a.useState)(""),[N,k]=(0,a.useState)(""),[D,_]=(0,a.useState)("sales_department"),[C,L]=(0,a.useState)(null),[S,P]=(0,a.useState)({}),[q,Z]=(0,a.useState)([]),[A,$]=(0,a.useState)(null),M=async()=>{let[e,t]=await Promise.all([o.Z.get("/users/count"),o.Z.get("/users")]);m(e.data),g(t.data.users);try{let e=await o.Z.get("/accountant-files");Z(e.data?.files??[])}catch(e){$(e.response?.data?.message||"Failed to load accountant files")}},U=async e=>{e.preventDefault(),L(null);try{await o.Z.post("/users/create",{email:w,password:N,role:D}),L("User created successfully"),y(""),k(""),await M()}catch(e){L(e.response?.data?.message||"Failed to create user")}},E=async e=>{try{let t=S[e];if(!t)return;await o.Z.post("/users/suspend",{id:e,until:t}),await M()}catch(e){alert(e.response?.data?.message||"Failed to suspend user")}},F=async e=>{try{await o.Z.post("/users/suspend",{id:e}),await M()}catch(e){alert(e.response?.data?.message||"Failed to clear suspension")}},R=async(e,t)=>{if(confirm(`Delete user ${t}? This cannot be undone.`))try{await o.Z.post("/users/delete",{id:e}),await M()}catch(e){alert(e.response?.data?.message||"Failed to delete user")}},z=async(e,s)=>{try{let t=await o.Z.get(`/accountant-files/${e}`,{responseType:"blob"}),r=window.URL.createObjectURL(new Blob([t.data])),a=document.createElement("a");a.href=r,a.download=s,a.click(),window.URL.revokeObjectURL(r)}catch(e){alert(e.response?.data?.message||"Download failed"),(e.response?.status===401||e.response?.status===403)&&t()}},B=p.filter(e=>!!e.last_login_at&&(Date.now()-new Date(e.last_login_at).getTime())/864e5<=7).length,T=p.filter(e=>e.account_locked_until&&new Date(e.account_locked_until)>new Date).length;return r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 p-6",children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto",children:[r.jsx("div",{className:"bg-white/80 backdrop-blur-xl rounded-2xl shadow-xl border border-white/20 p-6 mb-6",children:(0,r.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[(0,r.jsxs)("div",{children:[r.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-blue-600 to-indigo-600 bg-clip-text text-transparent mb-2",children:"Super Admin Dashboard"}),(0,r.jsxs)("p",{className:"text-gray-600 flex items-center space-x-2",children:[r.jsx("span",{className:"text-xl",children:"\uD83D\uDC64"}),r.jsx("span",{children:e?.email}),r.jsx("span",{className:"px-2 py-1 bg-indigo-100 text-indigo-700 rounded-lg text-xs font-semibold",children:"SUPER ADMIN"})]})]}),r.jsx(d.Z,{onClick:t,variant:"danger",children:(0,r.jsxs)("span",{className:"flex items-center space-x-2",children:[r.jsx("span",{children:"Logout"}),r.jsx("span",{children:"\uD83D\uDEAA"})]})})]})}),b?(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center py-20",children:[r.jsx(c.Z,{}),r.jsx("p",{className:"text-gray-600 mt-4 text-lg font-medium",children:"Loading dashboard..."})]}):j?(0,r.jsxs)(u,{variant:"glass",className:"text-center py-12",children:[r.jsx("div",{className:"text-red-600 text-lg font-semibold mb-2",children:"⚠️ Error"}),r.jsx("div",{className:"text-gray-700",children:j})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[r.jsx(x,{title:"Total Users",value:h?.total??0,variant:"blue",icon:r.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})})}),r.jsx(x,{title:"Recent Logins",value:B,variant:"green",icon:r.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),trend:{value:`${B} this week`,isPositive:!0}}),r.jsx(x,{title:"Suspended Users",value:T,variant:"orange",icon:r.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),r.jsx(x,{title:"Accountant Files",value:q.length,variant:"purple",icon:r.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})})]}),(0,r.jsxs)(u,{variant:"gradient",className:"mb-8",children:[(0,r.jsxs)("h2",{className:"text-2xl font-bold mb-6 flex items-center space-x-2 bg-gradient-to-r from-blue-600 to-indigo-600 bg-clip-text text-transparent",children:[r.jsx("span",{className:"text-2xl",children:"➕"}),r.jsx("span",{children:"Create New User"})]}),C&&r.jsx("div",{className:`mb-4 px-4 py-3 rounded-xl font-medium ${C.includes("successfully")?"bg-green-100 text-green-800 border border-green-200":"bg-red-100 text-red-800 border border-red-200"}`,children:C}),(0,r.jsxs)("form",{onSubmit:U,className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[r.jsx(i.Z,{type:"email",placeholder:"Email",value:w,onChange:e=>y(e.target.value),required:!0}),r.jsx(i.Z,{type:"password",placeholder:"Temp Password",value:N,onChange:e=>k(e.target.value),required:!0}),(0,r.jsxs)("select",{className:"border-2 border-gray-200 rounded-xl px-4 py-3 focus:outline-none focus:border-blue-500 focus:ring-4 focus:ring-blue-500/20 transition-all",value:D,onChange:e=>_(e.target.value),children:[r.jsx("option",{value:"sales_department",children:"Sales"}),r.jsx("option",{value:"human_resources",children:"HR"}),r.jsx("option",{value:"marketing",children:"Marketing"}),r.jsx("option",{value:"accountant",children:"Accountant"}),r.jsx("option",{value:"super_admin",children:"Super Admin"})]}),r.jsx(d.Z,{type:"submit",variant:"success",children:(0,r.jsxs)("span",{className:"flex items-center justify-center space-x-2",children:[r.jsx("span",{children:"Create User"}),r.jsx("span",{children:"✨"})]})})]})]}),(0,r.jsxs)(u,{variant:"gradient",className:"mb-8",children:[(0,r.jsxs)("h2",{className:"text-2xl font-bold mb-6 flex items-center space-x-2 bg-gradient-to-r from-blue-600 to-indigo-600 bg-clip-text text-transparent",children:[r.jsx("span",{className:"text-2xl",children:"\uD83D\uDC65"}),r.jsx("span",{children:"User Management"})]}),r.jsx("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full",children:[r.jsx("thead",{children:(0,r.jsxs)("tr",{className:"border-b-2 border-white/20",children:[r.jsx("th",{className:"py-3 px-4 text-left font-bold text-white",children:"Email"}),r.jsx("th",{className:"py-3 px-4 text-left font-bold text-white",children:"Role"}),r.jsx("th",{className:"py-3 px-4 text-left font-bold text-white",children:"Last Login"}),r.jsx("th",{className:"py-3 px-4 text-left font-bold text-white",children:"Created"}),r.jsx("th",{className:"py-3 px-4 text-left font-bold text-white",children:"Status"}),r.jsx("th",{className:"py-3 px-4 text-left font-bold text-white",children:"Actions"})]})}),r.jsx("tbody",{children:p.map(e=>(0,r.jsxs)("tr",{className:"border-b border-white/10 hover:bg-white/10 transition-colors",children:[r.jsx("td",{className:"py-3 px-4 font-semibold text-white",children:e.email}),r.jsx("td",{className:"py-3 px-4",children:r.jsx("span",{className:"px-3 py-1 bg-blue-100 text-blue-800 rounded-lg text-sm font-bold capitalize",children:e.role?.replace("_"," ")})}),r.jsx("td",{className:"py-3 px-4 text-sm font-medium text-white",children:e.last_login_at?new Date(e.last_login_at).toLocaleDateString():"-"}),r.jsx("td",{className:"py-3 px-4 text-sm font-medium text-white",children:e.created_at?new Date(e.created_at).toLocaleDateString():"-"}),r.jsx("td",{className:"py-3 px-4",children:e.account_locked_until&&new Date(e.account_locked_until)>new Date?r.jsx("span",{className:"px-3 py-1 bg-red-100 text-red-800 rounded-lg text-sm font-bold",children:"Suspended"}):r.jsx("span",{className:"px-3 py-1 bg-green-100 text-green-800 rounded-lg text-sm font-bold",children:"Active"})}),r.jsx("td",{className:"py-3 px-4",children:(0,r.jsxs)("div",{className:"flex flex-col gap-2",children:[r.jsx("input",{type:"datetime-local",className:"border-2 border-gray-200 rounded-lg px-2 py-1 text-sm focus:outline-none focus:border-blue-500",value:S[e.id]||"",onChange:t=>P(s=>({...s,[e.id]:t.target.value}))}),(0,r.jsxs)("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>E(e.id),className:"px-3 py-1 bg-orange-500 hover:bg-orange-600 text-white rounded-lg text-sm font-medium transition-colors",children:"Suspend"}),r.jsx("button",{onClick:()=>F(e.id),className:"px-3 py-1 bg-gray-500 hover:bg-gray-600 text-white rounded-lg text-sm font-medium transition-colors",children:"Clear"}),r.jsx("button",{onClick:()=>R(e.id,e.email),className:"px-3 py-1 bg-red-500 hover:bg-red-600 text-white rounded-lg text-sm font-medium transition-colors",children:"Delete"})]})]})})]},e.id))})]})})]}),(0,r.jsxs)(u,{variant:"gradient",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,r.jsxs)("h2",{className:"text-2xl font-bold flex items-center space-x-2 bg-gradient-to-r from-blue-600 to-indigo-600 bg-clip-text text-transparent",children:[r.jsx("span",{className:"text-2xl",children:"\uD83D\uDCC1"}),r.jsx("span",{children:"Accountant Files"})]}),(0,r.jsxs)("div",{className:"flex gap-2",children:[r.jsx(d.Z,{onClick:()=>s.push("/dashboard/accountant"),variant:"secondary",children:"Open Accountant Dashboard"}),r.jsx(d.Z,{onClick:async()=>{try{let e=await o.Z.get("/accountant-files");Z(e.data?.files??[]),$(null)}catch(e){$(e.response?.data?.message||"Failed to refresh files")}},variant:"outline",children:"\uD83D\uDD04 Refresh"})]})]}),A&&r.jsx("div",{className:"mb-4 px-4 py-3 rounded-xl bg-red-100 text-red-800 border border-red-200 font-medium",children:A}),(0,r.jsxs)("div",{className:"overflow-x-auto",children:[(0,r.jsxs)("table",{className:"min-w-full",children:[r.jsx("thead",{children:(0,r.jsxs)("tr",{className:"border-b-2 border-white/20",children:[r.jsx("th",{className:"py-3 px-4 text-left font-bold text-white",children:"Filename"}),r.jsx("th",{className:"py-3 px-4 text-left font-bold text-white",children:"Type"}),r.jsx("th",{className:"py-3 px-4 text-left font-bold text-white",children:"Size"}),r.jsx("th",{className:"py-3 px-4 text-left font-bold text-white",children:"Uploaded"}),r.jsx("th",{className:"py-3 px-4 text-left font-bold text-white",children:"Action"})]})}),r.jsx("tbody",{children:q.map(e=>(0,r.jsxs)("tr",{className:"border-b border-white/10 hover:bg-white/10 transition-colors",children:[r.jsx("td",{className:"py-3 px-4 font-semibold text-white",children:e.filename}),r.jsx("td",{className:"py-3 px-4 text-sm font-medium text-white",children:e.mimetype}),(0,r.jsxs)("td",{className:"py-3 px-4 text-sm font-medium text-white",children:[(e.size/1024).toFixed(1)," KB"]}),r.jsx("td",{className:"py-3 px-4 text-sm font-medium text-white",children:new Date(e.created_at).toLocaleDateString()}),r.jsx("td",{className:"py-3 px-4",children:r.jsx("button",{onClick:()=>z(e.id,e.filename),className:"px-4 py-2 bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white rounded-lg font-medium transition-all transform hover:scale-105",children:"\uD83D\uDCE5 Download"})})]},e.id))})]}),0===q.length&&(0,r.jsxs)("div",{className:"py-12 text-center text-gray-500",children:[r.jsx("div",{className:"text-6xl mb-4",children:"\uD83D\uDCC2"}),r.jsx("p",{className:"text-lg font-medium",children:"No files uploaded yet"})]})]})]})]})]})})}},3679:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});var r=s(326);s(7577);let a=({className:e="",variant:t="primary",children:s,...a})=>r.jsx("button",{className:`
        ${{primary:"bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white shadow-lg shadow-blue-500/50 hover:shadow-blue-600/50",secondary:"bg-gradient-to-r from-gray-600 to-gray-700 hover:from-gray-700 hover:to-gray-800 text-white shadow-lg shadow-gray-500/50",danger:"bg-gradient-to-r from-red-600 to-pink-600 hover:from-red-700 hover:to-pink-700 text-white shadow-lg shadow-red-500/50",success:"bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 text-white shadow-lg shadow-green-500/50",outline:"bg-transparent border-2 border-blue-600 text-blue-600 hover:bg-blue-50 shadow-none"}[t]}
        rounded-xl px-6 py-3 w-full font-semibold
        transition-all duration-300 
        transform hover:scale-[1.02] active:scale-[0.98]
        disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none
        focus:outline-none focus:ring-4 focus:ring-blue-500/50
        ${e}
      `,...a,children:s})},4231:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});var r=s(326);s(7577);let a=({className:e="",label:t,error:s,icon:a,labelClassName:n,...l})=>(0,r.jsxs)("div",{className:"w-full",children:[t&&r.jsx("label",{className:n||"block text-sm font-semibold text-gray-700 mb-2",children:t}),(0,r.jsxs)("div",{className:"relative",children:[a&&r.jsx("div",{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400",children:a}),r.jsx("input",{className:`
            bg-white border-2 border-gray-200 text-gray-900 
            rounded-xl px-4 py-3 w-full
            ${a?"pl-12":""}
            focus:outline-none focus:border-blue-500 focus:ring-4 focus:ring-blue-500/20
            hover:border-gray-300
            transition-all duration-300
            placeholder:text-gray-400
            disabled:bg-gray-50 disabled:cursor-not-allowed
            ${s?"border-red-500 focus:border-red-500 focus:ring-red-500/20":""}
            ${e}
          `,...l})]}),s&&r.jsx("p",{className:"mt-1 text-sm text-red-600 font-medium",children:s})]})},2186:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});var r=s(326);s(7577);let a=function(){return r.jsx("div",{className:"flex justify-center items-center",children:r.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-t-2 border-b-2 border-blue-500"})})}},6171:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n,dynamic:()=>a});var r=s(8570);let a=(0,r.createProxy)(String.raw`/home/ubuntu/fyp/frontend/app/dashboard/superadmin/page.tsx#dynamic`),n=(0,r.createProxy)(String.raw`/home/ubuntu/fyp/frontend/app/dashboard/superadmin/page.tsx#default`)}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[229,317],()=>s(4554));module.exports=r})();